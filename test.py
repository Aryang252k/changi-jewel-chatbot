# urls={'https://www.changiairport.com/in/en/experience/kids.html', 'https://www.changiairport.com/in/en/dine-and-shop/dining-directory.html', '#', 'https://www.changiairport.com/en/careers.html', 'https://www.changiairport.com/in/en/fly/transit-guide.html', 'https://www.changiairport.com/in/en/happenings/events-directory/pop-up-stores.html', 'https://www.changiairport.com/bin/changiairport/ciam/login.data?referrer=https://www.changiairport.com/in/en.html', 'https://x.com/changiairport', None, 'https://www.changiairport.com/in/en/at-changi/plan-your-events.html', 'https://nowboarding.changiairport.com/travel-the-world/best-things-to-do-in-busan.html', 'https://www.changiairport.com/in/en/at-changi/facilities-and-services-directory/baggage-storage.html', 'https://www.changiairport.com/in/en/at-changi/map.html', 'https://nowboarding.changiairport.com/travel-the-world/travel-guide-to-ethiopia-addis-ababa.html', '/in/en/privacy-policy.html', 'https://www.changiairport.com/in/en.html', '/in/en/rewards/dashboard.html', 'https://www.changiairport.com/in/en/fly/arrival-guide/immigration.html#automated-tab', 'https://nowboarding.changiairport.com/travel-the-world/6-new-things-to-do-in-bangkok-for-your-next-weekend-getaway.html', 'https://www.changiairport.com/in/en/fly/dutiable-and-prohibited-items.html', 'https://www.changiairport.com/en/help/wechat.html', 'https://www.changiairport.com/in/en/search.html?searchTerm=Singapore Airlines', 'https://nowboarding.changiairport.com/travel-the-world.html', 'https://nowboarding.changiairport.com/travel-the-world/top-6-things-to-do-for-family-fun-in-surabaya.html', 'https://www.facebook.com/changiairport', 'https://nowboarding.changiairport.com/travel-the-world/things-to-do-in-haikou-hainan-china.html', 'https://www.ishopchangi.com/en/home', 'https://www.changiairport.com/in/en/search.html', 'https://bit.ly/2xQwNT8', 'https://www.changiairport.com/in/en/fly/arrival-guide/immigration.html', 'https://www.changiairport.com/in/en/rewards/members-events.html', 'https://www.changiairport.com/in/en/rewards/dashboard.html', 'https://www.changiairport.com/in/en/at-changi/transport-and-directions/leaving-the-airport.html', 'https://www.changiairport.com/in/en/fly/flight-information.html', 'https://www.changiairport.com/in/en/rewards/monarch.html', 'https://nowboarding.changiairport.com/travel-the-world/top-things-to-do-in-jeju.html', 'https://www.changiairport.com/in/en/rewards.html', 'https://www.changiairport.com/en/vulnerability-disclosure-policy.html', 'https://www.changiairport.com/in/en/rewards/my-rewards.html', 'https://nowboarding.changiairport.com/travel-the-world/a-weekend-getaway-in-sibu-malaysia.html', 'https://www.changiairport.com/in/en/happenings/promotions.html', 'https://www.changiairport.com/in/en/privacy-policy.html', 'https://www.changiairport.com/in/en/happenings/promotions/activity-book.html', 'https://www.changiairport.com/in/en/search.html?searchTerm=Lounges', 'https://www.jewelchangiairport.com/en.html', 'https://www.changiairport.com/in/en/fly/lounges.html', 'https://www.changiairport.com/in/en/at-changi/facilities-and-services-directory.html?category=hotels', 'https://nowboarding.changiairport.com/travel-the-world/lesser-known-attractions-in-hong-kong-that-only-locals-know.html', 'https://apps.apple.com/sg/app/ichangi/id391730848', 'https://www.changiairport.com/in/en/rewards/catalogue.html', 'https://www.tiktok.com/@changiairport?lang=en', 'https://www.changiairport.com/in/en/dine-and-shop/shopping-concierge.html', '/in/en/experience.html', 'https://www.changiairport.com/in/en/rewards/members-special.html', 'https://nowboarding.changiairport.com/travel-the-world/top-places-to-visit-in-penang.html', 'https://nowboarding.changiairport.com/travel-the-world/must-dos-on-your-holiday-in-bahrain.html', 'https://www.changiairport.com/in/en/help/changi-app/baggage-tracker.html', 'https://nowboarding.changiairport.com/travel-the-world/japan-bound-lesser-known-spots-to-visit-in-tokyo.html', 'https://www.changiairport.com/in/en/by-laws-and-conditions-of-use.html', 'https://www.changiairport.com/in/en/happenings/events-directory.html', '/in/en/rewards.html', 'https://www.changiairport.com/in/en/experience/attractions-directory.html', 'https://www.changiairport.com/in/en/help.html', 'https://www.changiairport.com/in/en/happenings/promotions/shop-more-when-you-fly.html', '/in/en/help.html', 'https://nowboarding.changiairport.com/travel-the-world/5-best-day-trips-from-london-uk.html', 'https://www.changiairport.com/in/en/at-changi/special-assistance.html', 'https://nowboarding.changiairport.com/travel-the-world/top-things-to-do-and-see-in-rome.html', 'https://www.changiairport.com/in/en/fly/departure-guide.html', 'https://www.changiairport.com/in/en/search.html?searchTerm=7 Eleven', 'https://play.google.com/store/apps/details?id=com.changiairport.cagapp', 'https://www.xiaohongshu.com/user/profile/5e15eed30000000001001063', 'https://www.changiairport.com/in/en/help/changi-app/book-redeem-play.html', 'https://nowboarding.changiairport.com/travel-the-world/beyond-amsterdam-8-hidden-gems-to-visit-in-the-netherlands.html', 'https://nowboarding.changiairport.com/travel-the-world/onsens-and-ryokans-in-kyoto.html', 'https://www.linkedin.com/company/changiairportgroup', 'https://www.changiairport.com/en/corporate.html', 'https://nowboarding.changiairport.com/travel-the-world/uncover-a-different-side-of-ipoh.html', 'https://www.youtube.com/c/changiairport', 'https://www.changiairport.com/in/en/cai.html', 'https://www.changiairport.com/in/en/happenings/events-directory/st3ps.html', 'http://instagram.com/changiairport', 'https://www.changiairport.com/in/en/search.html?searchTerm=Butterfly Garden', 'https://www.changiairport.com/in/en/experience/tours.html', '/in/en/fly.html', '/in/en/at-changi.html', 'https://www.changiairport.com/in/en/help/changi-app/changi-pay.html', 'https://www.changiairport.com/in/en/help/changi-app.html', 'https://www.changiairport.com/in/en/help/contact-us.html', 'https://www.changiairport.com/in/en/at-changi/transport-and-directions.html', '/in/en/happenings.html', 'https://www.changiairport.com/in/en/happenings/events-directory/tea-time-deals.html', 'https://www.changiairport.com/in/en/dine-and-shop/shop-directory.html', 'https://www.changiairport.com/in/en/at-changi/terminal-guides.html', '/bin/changiairport/ciam/logout.data', 'https://www.changiairport.com/in/en/fly/arrival-guide.html', 'https://www.changiairport.com/in/en/search.html?searchTerm=Scoot', 'https://weibo.com/changiairport', 'https://www.changiairport.com/en.html', 'https://nowboarding.changiairport.com/travel-the-world/best-day-trips-from-melbourne.html', 'https://www.changiairport.com/in/en/help/assistance.html', 'https://www.jewelchangiairport.com/', 'javascript:void(0)', 'https://nowboarding.changiairport.com/travel-the-world/exploration-of-cebu-natural-wonders.html', 'https://nowboarding.changiairport.com/travel-the-world/popular-food-to-eat-in-phnom-penh-cambodia.html', 'https://www.changiairport.com/bin/changiairport/ciam/login.data?referrer=https://www.changiairport.com/in/en.html?referrer=https://www.changiairport.com/in/en.html', 'https://nowboarding.changiairport.com/travel-the-world/ultimate-guide-to-jeonju-south-korea.html', 'https://www.changiairport.com/in/en/happenings/promotions/blackpink-world-tour-deadline-in-singapore.html', 'https://www.changiairport.com/in/en/rewards/benefits-and-privileges.html', 'https://nowboarding.changiairport.com', 'https://www.changiairport.com/in/en/happenings/promotions/outlet-deals.html', 'https://www.ica.gov.sg/enter-transit-depart/entering-singapore/sg-arrival-card', 'https://www.changiairport.com/in/en/fly/airline-information.html', 'https://www.changiairport.com/in/en/happenings/events-directory/sg60-celebrations.html', 'https://www.changiairport.com/in/en/at-changi/facilities-and-services-directory.html', '/in/en/dine-and-shop.html'}


# def filter_urls(urls):
#     filter_ls=["facebook","instagram","linkedin","Telegram","tiktok","x.com","youtube","wechat","weibo","xiaohongshu"]
#     connect_ls=[]
#     filtered_ls=[]
#     for u in urls:
#         flag=True
#         if u:
#             if u.startswith("/"):
#                 u="https://www.changiairport.com"+u

#             for i in filter_ls:
#                 if i in u:
#                     connect_ls.append(u)
#                     flag=False 

#             if flag:
#                 filtered_ls.append(u)

#     return filtered_ls,connect_ls

# a,v=filter_urls(urls=urls)


# from urllib.parse import urlparse
# import re

# # Original set of URLs (your provided data)
# raw_urls = {
#     'https://www.changiairport.com/in/en/experience/kids.html',
#     'https://www.jewelchangiairport.com/',
#     'https://www.changiairport.com/in/en/dine-and-shop/dining-directory.html',
#     'https://www.changiairport.com/in/en/fly/transit-guide.html',
#     'https://www.changiairport.com/in/en/help/changi-app/baggage-tracker.html',
#     '#',
#     None,
#     'javascript:void(0)',
#     'https://www.youtube.com/c/changiairport',
#     'https://www.changiairport.com/in/en/at-changi/facilities-and-services-directory.html?category=hotels',
#     'https://www.jewelchangiairport.com/en.html',
#     # Add the rest of your set...
# }

# # Utility: filter and transform URLs
# def clean_and_classify_urls(urls):
#     pages = []
#     for url in urls:
#         if not url or url.startswith("#") or url.startswith("javascript:"):
#             continue  # Skip invalid URLs
        
#         parsed = urlparse(url)
#         netloc = parsed.netloc.lower()
#         path = parsed.path.lower()

#         if "changiairport.com" in netloc:
#             location = "changi"
#         elif "jewelchangiairport.com" in netloc:
#             location = "jewel"
#         else:
#             continue  # Skip irrelevant domains

#         # Extract section from path heuristically
#         section = "home"
#         path_parts = [p for p in path.split("/") if p and p != "in" and p != "en"]
#         if path_parts:
#             section_guess = path_parts[-1].replace("-", " ").replace(".html", "")
#             section_guess = re.sub(r'\W+', ' ', section_guess).strip()
#             section = section_guess or "unknown"

#         pages.append({
#             "url": url,
#             "location": location,
#             "section": section
#         })

#     return pages

# # Run transformation
# pages_to_scrape = clean_and_classify_urls(a)

# # Pretty print
# from pprint import pprint
# pprint(pages_to_scrape)


# import json

# with open("./data/scraped_changi_jewel.json", "r") as f:
#         scraped_data=json.load(f)

# from urllib.parse import urlparse

# a="ad"
# parsed = urlparse(a)
# netloc = parsed.netloc.lower()
# path = parsed.path.lower()
# print(netloc)


# if "jewelchangiairport.com" in netloc:
#     location = "jewel"
# elif "changiairport.com" in netloc:
#     location = "changi"
    

# for i in range(len(scraped_data)):
#      src=scraped_data[i]['metadata']['source']
#      parsed = urlparse(src)
#      netloc = parsed.netloc.lower()
#      path = parsed.path.lower()



#      if "jewelchangiairport.com" in netloc:
#         location = "jewel"
#      elif "changiairport.com" in netloc:
#         location = "changi"

#      print(src,location)
#      scraped_data[i]['metadata']['location']=location

    
    
     
     


# print("Data saved to ./data/scraped_changi_jewel.json")
# with open("./data/scraped_changi_jewel.json", "w") as f:
#     json.dump(scraped_data, f, indent=2)



# import json

# with open("./data/scraped_changi_jewel.json", "r") as f:
#         scraped_data=json.load(f)
# print(scraped_data[1]['text'].replace("\n",'').replace('\u00a0',''))

# from model.llms import LLMs

# llm=LLMs()


# model=llm.gemini_llm()

# # respone= model.invoke("helloo")

# # print(respone.content)


# async def run_async_calls():
#     # Async stream
#     print("\nAsync Stream Result:")
#     async for chunk in model.astream(
#         "Write a short poem about asynchronous programming."
#     ):
#         print(chunk, end="\n", flush=True)
#     print("\n")


# import asyncio


# asyncio.run(run_async_calls())


# from graph.chatbot_graph import ChatbotState,create_chatbot_graph
# import time
# a,c=create_chatbot_graph()

# initial_state = ChatbotState(user_query="Write a short poem about asynchronous programming.", start_time=time.time())
# config = {"configurable": {"thread_id": "1"}}

# result = a.invoke(initial_state.model_dump(), config=config)

# print(result)

# async def run_async_calls():
#     # Async stream
#     print("\nAsync Stream Result:")
#     async for chunk in a.astream(
#        initial_state.model_dump(), config=config
#     ):
#         print(chunk, end="\n", flush=True)
#     print("\n")


# import asyncio


# asyncio.run(run_async_calls())

# from langchain_community.tools import DuckDuckGoSearchRun
# web_search = DuckDuckGoSearchRun()

# a=web_search.invoke("What are the best restaurants inside Jewel Changi?")
# print(len(a))


import requests

BASE_URL = f"http://localhost:8000"

def send_query(query: str):
    response = requests.post(f"{BASE_URL}/chat", json={"message": query})
    if response.ok:
        print("Response:", response.json())
    else:
        print("Error:", response.status_code)

if __name__ == "__main__":
    send_query("Where can I book a taxi at Changi?")
